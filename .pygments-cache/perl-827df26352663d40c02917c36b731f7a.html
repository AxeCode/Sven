<div class="highlight"><pre><span class="c1"># 使用期计算的伪代码</span>
<span class="nv">$apparent_age</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nv">$time_got_response</span> <span class="o">-</span> <span class="nv">$Date_header_value</span><span class="p">);</span>
<span class="nv">$corrected_apparent_age</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="nv">$apparent_age</span><span class="p">,</span> <span class="nv">$Age_header_value</span><span class="p">);</span>
<span class="nv">$response_delay_estimate</span> <span class="o">=</span> <span class="p">(</span><span class="nv">$time_got_response</span> <span class="o">-</span> <span class="nv">$time_issued_request</span><span class="p">);</span>
<span class="nv">$age_when_document_arrived_at_our_cache</span> <span class="o">=</span>
    <span class="nv">$correncted_apparent_age</span> <span class="o">+</span> <span class="nv">$response_delay_estimeate</span><span class="p">;</span>
<span class="nv">$how_long_copy_has_been_in_our_cache</span> <span class="o">=</span>
    <span class="nv">$current_time</span> <span class="o">-</span> <span class="nv">$time_got_response</span><span class="p">;</span>
<span class="nv">$age</span> <span class="o">=</span> <span class="nv">$age_when_document_arrived_at_our_cache</span> <span class="o">+</span>
    <span class="nv">$how_long_copy_has_been_in_our_cache</span><span class="p">;</span>
</pre></div>